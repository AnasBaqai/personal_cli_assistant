services:
  assistant:
    build: .
    stdin_open: true      # Keep stdin open for interactive (-i)
    tty: true             # Allocate pseudo-TTY (-t)
    environment:
      - OLLAMA_HOST=http://host.docker.internal:11434
      - OLLAMA_MODEL=${OLLAMA_MODEL:-llama3.1}
      - OPENWEATHERMAP_API_KEY=${OPENWEATHERMAP_API_KEY:-}
    volumes:
      - assistant_history:/root/.assistant_history
    extra_hosts:
      - "host.docker.internal:host-gateway"

volumes:
  assistant_history:
    name: assistant_history
